#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bf$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
bf$coefficients
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bf$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bf$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(ab$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bb$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(asf$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bsf$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(asb$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bsb$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
#remove NA values from dataframe
coef_df[is.na(coef_df)] <- 0
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(bf$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
coef_df <- merge(coef_df, data.frame(ab$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)[, names(coef_df) != "Row.names"]
rownames(coef_df) <- names(fm$coefficients)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(bf$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(ab$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(bb$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(asf$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(bsf$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(asb$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
coef_df <- merge(coef_df, data.frame(bsb$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
#remove NA values from dataframe
coef_df[is.na(coef_df)] <- 0
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)
rownames(coef_df) <- names(fm$coefficients)
coef_df <- coef_df[, names(coef_df) != "Row.names"]
af$coefficients
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE, sort = FALSE)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE, sort = TRUE)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE, sort = TRUE)
rownames(coef_df) <- names(coef_df$Row.names)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE, sort = TRUE)
#create dataframe of coefficient values
coef_df <- data.frame(fm$coefficients) #create dataframe of full model coefficients
colnames(coef_df) <- c("fm.coefficients")
#add other model coefficients
coef_df <- merge(coef_df, data.frame(af$coefficients), by = "row.names", all = TRUE)
coef_df <- merge(coef_df, data.frame(af$coefficients), data.frame(bf$coefficients), data.frame(ab$coefficients), by = "row.names", all = TRUE)
library(ISLR)
library(dplyr)
library(glmnet)
x_full <- dplyr::select(College, Top25perc, Expend)
y_full <- College$Grad.Rate
row_del <- as.numeric(sample(1:777, 1))
x_train <- x_full[-row_del,]
y_train <- y_full[-row_del]
ridge1_cv <- cv.glmnet(x = as.matrix(x_train), y = as.matrix(y_train),
## type.measure: loss to use for cross-validation.
type.measure = "mse",
## K = 10 is the default.
nfold = 10,
## 'alpha = 1' is the lasso penalty, and 'alpha = 0' the ridge penalty.
alpha = 0)
ridge1_cv
class(ridge1_cv)
source('~/NSFREU/reu-2021/code/variable-selection/monte-carlo.r', echo=TRUE)
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(coef(model_list[[i]])) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb"))
View(coefs_df)
# Lasso code
lasso <- glmnet(x = as.matrix(x_train), y = as.matrix(y_train), alpha = 1)
# Lasso code
lasso <- glmnet(x = ex.dat[-1], y = ex.dat$y, alpha = 1)
View(lasso)
coef(lasso)
# Lasso code
lasso <- cv.glmnet(x = ex.dat[-1], y = ex.dat$y, alpha = 1)
# Lasso code
lasso <- cv.glmnet(x = ex.dat[-1], y = ex.dat$y)
# Lasso code
lasso <- cv.glmnet(x = ex.dat[-1], y = ex.dat$y, alpha = 1)
?cv.glmnet
?cv.glmnet.raw
?cv.glmnet
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
View(lasso)
coef(lasso)
coef(lasso, s=lambda.1se)
?cv.glmnet
?glmnet
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1, intercept = FALSE)
coef(lasso)
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1, intercept = TRUE)
coef(lasso)
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(coef(model_list[[i]])) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb", "lasso"))
class(coef(lasso))
list(coef(lasso))
matrix(coef(lasso))
data.frame(coef(lasso))
as.data.frame(coef(lasso))
data.frame(as.matrix(coef(lasso)))
coef(lasso)
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb"))
as.data.frame(as.matrix(coef(lasso)))
length(as.data.frame(as.matrix(coef(lasso))))
class(as.data.frame(as.matrix(coef(lasso))))
as.data.frame(as.matrix(coef(lasso)))[-2]
as.data.frame(as.matrix(coef(lasso)))[-2,]
as.data.frame(as.matrix(coef(lasso)))[-2]
as.data.frame(as.matrix(coef(lasso)))[-2,1]
as.data.frame(as.matrix(coef(lasso)))[1,-2]
as.data.frame(as.matrix(coef(lasso)))[-2,0]
as.data.frame(as.matrix(coef(lasso)))[-2,1]
as.data.frame(as.matrix(coef(lasso)))[-2,1]
l <- as.data.frame(as.matrix(coef(lasso)))[-2]
View(l)
l <- as.data.frame(as.matrix(coef(lasso)))[-2,]
l <- as.data.frame(as.matrix(coef(lasso)))
l <- as.data.frame(as.matrix(coef(lasso)))[-2,]
colnames(l) <- names(coef(fm))
coef(lasso)
coef(fm)
as.data.frame(as.matrix(coef(lasso)))[-2:3,]
as.data.frame(as.matrix(coef(lasso)))[-2:-3,]
as.data.frame(as.matrix(coef(lasso))[-2:-3,])
lasso_coefs$coefficients <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
lasso_coefs <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
lasso_coefs$coefficients <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
View(lasso_coefs)
lasso_coefs <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
?as.data.frame
lasso_coefs <- as.data.frame(as.matrix(coef(lasso))[-2:-3,], col.names = c("coefficients"))
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_coefs <- as.data.frame(as.matrix(coef(lasso))[-2:-3,], col.names = c("coefficients"))
colnames(lasso_coefs) <- c("coefficients")
lasso_coefs <- as.data.frame(as.matrix(coef(lasso))[-2:-3,], `colnames<-`(c("coefficients")))
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_coefs <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_coefs) <- c("coefficients")
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_c) <- c("coefficients")
View(lasso_c)
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso_c), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb", "lasso"))
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso_c), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb", "lasso"))
list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso_c)
list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso_c)[[3]]$coefficients
list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso_c)[[9]]$coefficients
list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, lasso_c)[[10]]$coefficients
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb"))
coefs_df <- left_join(coefs_df, lasso_c)
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- as.data.frame(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_c) <- c("coefficients")
list(as.matrix(coef(lasso))[-2:-3,])
colnames(list(as.matrix(coef(lasso))[-2:-3,]))
test <-  list(as.matrix(coef(lasso))[-2:-3,])
View(test)
View(test)
test$x2
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_c) <- c("lasso")
lasso_c$betas <- row.names(lasso_c)
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_c) <- c("lasso")
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_c) <- c("coefficients")
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
lasso_c$betas <- row.names(lasso_c)
colnames(lasso_c) <- c("lasso", "betas")
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
lasso_c$betas <- row.names(lasso_c)
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- list(as.matrix(coef(lasso))[-2:-3,])
lasso_c$betas <- row.names(lasso_c)
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- data.frame(as.matrix(coef(lasso))[-2:-3,])
lasso_c$betas <- row.names(lasso_c)
# Lasso code
lasso <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 1)
lasso_c <- data.frame(as.matrix(coef(lasso))[-2:-3,])
colnames(lasso_c) <- c("lasso")
lasso_c$betas <- row.names(lasso_c)
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb"))
coefs_df <- left_join(coefs_df, lasso_c, by = "betas")
# Ridge code
ridge <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 0)
ridge_c <- data.frame(as.matrix(coef(ridge))[-2:-3,]) #turns coefs into usable dataframe
colnames(ridge_c) <- c("ridge")
ridge_c$betas <- row.names(ridge_c)
View(ridge_c)
# Ridge model for dealing with multicollinearity
ridge <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 0)
ridge_c <- data.frame(as.matrix(coef(ridge))[-2:-3,]) #turns coefs into usable dataframe
colnames(ridge_c) <- c("ridge")
ridge_c$betas <- row.names(ridge_c)
# Elastic Net model for multicollinearity and variable selection
enet <- cv.glmnet(x = model.matrix(y~., data = ex.dat), y = ex.dat$y, alpha = 0.8) #small alpha is not needed since small multicollinearity
enet_c <- data.frame(as.matrix(coef(enet))[-2:-3,]) #turns coefs into usable dataframe
colnames(enet_c) <- c("elastic.net")
enet_c$betas <- row.names(enet_c)
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb), c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb"))
#manually add lasso, ridge, and enet coefs
coefs_df <- left_join(coefs_df, lasso_c, by = "betas")
coefs_df <- left_join(coefs_df, ridge_c, by = "betas")
coefs_df <- left_join(coefs_df, enet_c, by = "betas")
?left_join
source('~/NSFREU/reu-2021/code/variable-selection/monte-carlo.r', echo=TRUE)
coef(mcp)
class(mcp)
mcp
lasso
lasso$lambda.1se
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, mcp, scad),
c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb", "mcp", "scad"))
#manually add lasso, ridge, and enet coefs
coefs_df <- left_join(coefs_df, lasso_c, by = "betas")
coefs_df <- left_join(coefs_df, ridge_c, by = "betas")
coefs_df <- left_join(coefs_df, enet_c, by = "betas")
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(model_list[[i]]$coefficients) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, mcp, scad),
c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb", "mcp", "scad"))
#manually add lasso, ridge, and enet coefs
coefs_df <- left_join(coefs_df, lasso_c, by = "betas")
coefs_df <- left_join(coefs_df, ridge_c, by = "betas")
coefs_df <- left_join(coefs_df, enet_c, by = "betas")
mcp
coef(mcp)
mcp$coefficients
# Gabe's probably slower method to put models into a dataframe
library(dplyr)
multi.merge <-function(model_list, col_names){ #takes input of list of lm models, and vector of column names
for (i in 1:length(model_list)){
model_list[[i]] <- data.frame(coef(model_list[[i]])) #turns lm model class into dataframe of coefficients
model_list[[i]]$betas <- row.names(model_list[[i]]) #adds column of beta coefficient names
}
# ugly code to rearrange order of beta column and full model column
full_df <- model_list[[1]]
full_df <- full_df[-1]
full_df$fm <- model_list[[1]][[1]]
for (i in 2:length(model_list)){
full_df <- left_join(full_df, model_list[[i]], by = "betas") #joins code together by beta coefficient name
}
full_df[is.na(full_df)] <- 0
colnames(full_df) <- c("betas", col_names) #renames columns according to what was input to the function
return(full_df)
}
coefs_df <- multi.merge(list(fm, af, bf, ab, bb, asf, bsf, asb, bsb, mcp, scad),
c("fm", "af", "bf", "ab", "bb", "asf", "bsf", "asb", "bsb", "mcp", "scad"))
#manually add lasso, ridge, and enet coefs
coefs_df <- left_join(coefs_df, lasso_c, by = "betas")
coefs_df <- left_join(coefs_df, ridge_c, by = "betas")
coefs_df <- left_join(coefs_df, enet_c, by = "betas")
class(scad)
clasS(mcp)
class(mcp)
mcp_c
coef(lasso)
