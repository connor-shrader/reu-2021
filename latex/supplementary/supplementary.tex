\documentclass{article}

\usepackage[margin = 1in]{geometry}

\usepackage{hyperref} % Clickable ref's
\usepackage{lscape}
\usepackage{ifthen}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{pgffor}
\usepackage[maxfloats=50]{morefloats}

% Clickable link setup
\hypersetup{
	colorlinks=true,
	linkcolor=blue,
	filecolor=magenta,      
	urlcolor=cyan,
	citecolor=blue
}


% https://tex.stackexchange.com/questions/192586/passing-command-output-as-a-parameter-to-the-other-command
% NormalTeXSyntaxON
\def\setcaseA#1 {\expandafter\def\csname a:#1\endcsname}
\def\responseword#1{\expandafter\ifx\csname a:#1\endcsname\relax \adefault 
	\else \csname a:#1\endcsname\fi}

\def\adefault {black}    
\setcaseA 1      {linear} 
\setcaseA 2      {non-linear}  

\def\setcaseB#1 {\expandafter\def\csname b:#1\endcsname}
\def\responsewordnodash#1{\expandafter\ifx\csname b:#1\endcsname\relax \bdefault 
	\else \csname b:#1\endcsname\fi}

\def\bdefault {black}    
\setcaseB 1      {linear} 
\setcaseB 2      {nonlinear} 

\def\setcaseC#1 {\expandafter\def\csname c:#1\endcsname}
\def\typenodash#1{\expandafter\ifx\csname c:#1\endcsname\relax \cdefault 
	\else \csname c:#1\endcsname\fi}

\def\cdefault {black}    
\setcaseC test-mse      {test\_mse} 
\setcaseC train-mse      {train\_mse}  
\setcaseC sensitivity      {sensitivity}  
\setcaseC specificity      {specificity}  

% NormalTeXSyntaxOff

% #1: n
% #2: p
% #3: train_mse, test_mse, sensitivity, or specificity
% #4: train-mse, test-mse, sensitivity, or specificity
% #5: response (1 or 2)
% #6: linear or nonlinear
% #7: linear or non-linear
\newcommand{\facetfigureinner}[7]{
	%(#1, #2, #3, #4, #5, #6, #7)
	\begin{figure}
		\centering
		\includegraphics[width=\textwidth]{figures/#6-facet/#4/facet\_#3\_#5\_#1\_#2.eps}
		\captionsetup{width=0.8\textwidth}
		\caption{#4, #7, $n = #1$, $p = #2$}
		\label{fig:#6-#4-#1-#2}
	\end{figure}
}

%\newcommand{\typenodash}[1]{
%	\ifthenelse{
%		\equal{#1}{train-mse}}{train\_mse}{
%	\ifthenelse{
%		\equal{#1}{test-mse}}{test\_mse}{
%	#1
%	}}
%}

%\newcommand{\responseword}[1]{
%	\ifthenelse{\equal{#1}{1}}{linear}{non-linear}
%}

%\newcommand{\responsewordnodash}[1]{
%	\ifthenelse{\equal{#1}{1}}{linear}{nonlinear}
%}

% #1: n
% #2: p
% #3: train-mse, test-mse, sensitivity, or specificity
% #4: response (1 or 2)
\newcommand{\facetfigure}[4]{
	\facetfigureinner{#1}{#2}{\typenodash{#3}}{#3}{#4}{\responsewordnodash{#4}}{\responseword{#4}}
}

\newcommand{\facetfiguretest}[7]{
	figures/#6-facet/#4/facet\_#3\_#5\_#1\_#2.eps
	
	fig:#6-#4-#1-#2
	
	Average mean squared error using the training data for all #7 simulations when $n = #1$ and $p = #2$.
	
	\includegraphics[width=\textwidth]{figures/#6-facet/#4/facet\_#3\_#5\_#1\_#2.eps}
}

\begin{document}
	%\facetfigure{1000}{10}{test-mse}{1}
	\maxdeadcycles=500
	\newcounter{figuresplaced}
	
	\foreach \response in {1, 2}{
		\foreach \type in {train-mse, test-mse, sensitivity, specificity}{
			\foreach \n in {50, 200, 1000}{
				\foreach \p in {10, 100, 2000}{
					\facetfigure{\n}{\p}{\type}{\response}
					%\stepcounter{figuresplaced}
					%\ifodd\value{figuresplaced}{\ }\else{\newpage}
				}
			}
		}
	}

	See \ref{fig:linear-test-mse-1000-10}
\end{document}